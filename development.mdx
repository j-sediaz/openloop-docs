---
title: 'Development Guide'
description: 'Best practices, error handling, and integration patterns for the OpenLoop Partners API'
---

# Development Guide

Everything you need to build great integrations with the OpenLoop Partners API. We'll cover the essentials without overwhelming you.

## Environment Configuration

### Base URLs

<CardGroup cols={2}>
  <Card title="Production" icon="globe">
    **Base URL**: `https://partners-api-sigma.vercel.app`  
    Use this for live integrations with real patient data
  </Card>
  <Card title="Testing" icon="flask">
    **Base URL**: `https://partners-api-sigma.vercel.app`  
    Same environment with test data and enhanced logging
  </Card>
</CardGroup>

### Authentication

Choose the authentication method that best fits your security requirements:

```javascript
// API Key Authentication (Recommended for server-to-server)
const headers = {
  'x-api-key': 'your-api-key-here',
  'Content-Type': 'application/json'
};

// Bearer Token Authentication (For OAuth2 flows)
const headers = {
  'Authorization': 'Bearer your-bearer-token-here',
  'Content-Type': 'application/json'
};
```

## Rate Limits & Performance

### Current Limits

- **Rate Limit**: 1,000 requests per hour per API key
- **Burst Limit**: 100 requests per minute
- **Concurrent Requests**: 10 simultaneous requests

### Implementing Rate Limiting

```javascript
class RateLimiter {
  constructor(requestsPerMinute = 100) {
    this.requests = [];
    this.limit = requestsPerMinute;
  }

  async waitIfNeeded() {
    const now = Date.now();
    const oneMinuteAgo = now - 60000;
    
    // Remove requests older than 1 minute
    this.requests = this.requests.filter(time => time > oneMinuteAgo);
    
    if (this.requests.length >= this.limit) {
      const oldestRequest = Math.min(...this.requests);
      const waitTime = 60000 - (now - oldestRequest);
      await new Promise(resolve => setTimeout(resolve, waitTime));
    }
    
    this.requests.push(now);
  }
}
```

## Error Handling

### HTTP Status Codes

The API uses standard HTTP status codes with detailed error responses:

<CardGroup cols={2}>
  <Card title="2xx Success" icon="check">
    - `200` - OK (GET, PUT)  
    - `201` - Created (POST)  
    - `204` - No Content (DELETE)
  </Card>
  <Card title="4xx Client Errors" icon="exclamation-triangle">
    - `400` - Bad Request  
    - `401` - Unauthorized  
    - `404` - Not Found  
    - `422` - Validation Error
  </Card>
</CardGroup>

### Error Response Format

All error responses follow a consistent format:

```json
{
  "error": "ValidationError",
  "message": "Invalid input data",
  "details": [
    {
      "field": "email",
      "issue": "Invalid email format"
    }
  ]
}
```

### Implementing Robust Error Handling

```javascript
async function handleApiCall(apiFunction) {
  try {
    const response = await apiFunction();
    return { success: true, data: response };
  } catch (error) {
    if (error.response) {
      // API returned an error response
      const { status, data } = error.response;
      
      switch (status) {
        case 401:
          // Handle authentication errors
          throw new Error('Invalid API credentials');
        case 422:
          // Handle validation errors
          return { 
            success: false, 
            errors: data.details,
            message: data.message 
          };
        case 429:
          // Handle rate limiting
          throw new Error('Rate limit exceeded. Please retry later.');
        default:
          throw new Error(`API Error: ${data.message || 'Unknown error'}`);
      }
    } else {
      // Network or other error
      throw new Error('Network error. Please check your connection.');
    }
  }
}
```

## Data Validation

### Patient Data Requirements

Ensure all required fields are present and properly formatted:

```javascript
function validatePatientData(patient) {
  const required = ['email', 'first_name', 'last_name', 'phone', 'birth_date', 'gender', 'sex', 'locations'];
  const missing = required.filter(field => !patient[field]);
  
  if (missing.length > 0) {
    throw new Error(`Missing required fields: ${missing.join(', ')}`);
  }
  
  // Validate email format
  const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
  if (!emailRegex.test(patient.email)) {
    throw new Error('Invalid email format');
  }
  
  // Validate date format (YYYY-MM-DD)
  const dateRegex = /^\d{4}-\d{2}-\d{2}$/;
  if (!dateRegex.test(patient.birth_date)) {
    throw new Error('Birth date must be in YYYY-MM-DD format');
  }
  
  return true;
}
```

## Integration Patterns

### Retry Logic with Exponential Backoff

```javascript
async function retryApiCall(apiFunction, maxRetries = 3) {
  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      return await apiFunction();
    } catch (error) {
      if (attempt === maxRetries) throw error;
      
      // Don't retry on client errors (4xx)
      if (error.response?.status >= 400 && error.response?.status < 500) {
        throw error;
      }
      
      // Exponential backoff: 1s, 2s, 4s
      const delay = Math.pow(2, attempt - 1) * 1000;
      await new Promise(resolve => setTimeout(resolve, delay));
    }
  }
}
```

### Caching Strategies

```javascript
class ApiCache {
  constructor(ttl = 300000) { // 5 minutes default
    this.cache = new Map();
    this.ttl = ttl;
  }
  
  get(key) {
    const item = this.cache.get(key);
    if (!item) return null;
    
    if (Date.now() - item.timestamp > this.ttl) {
      this.cache.delete(key);
      return null;
    }
    
    return item.data;
  }
  
  set(key, data) {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    });
  }
}
```

## Security Best Practices

<CardGroup cols={2}>
  <Card title="API Keys" icon="key">
    - Store API keys securely (environment variables)  
    - Rotate keys regularly  
    - Never commit keys to version control
  </Card>
  <Card title="Data Privacy" icon="shield">
    - Encrypt sensitive data in transit  
    - Follow HIPAA guidelines for patient data  
    - Implement proper access controls
  </Card>
</CardGroup>

## Testing Your Integration

### Unit Testing

```javascript
// Example test using Jest
describe('Patient API', () => {
  test('should create patient successfully', async () => {
    const patientData = {
      email: 'test@example.com',
      first_name: 'John',
      last_name: 'Doe',
      // ... other required fields
    };
    
    const result = await createPatient(patientData);
    expect(result.success).toBe(true);
    expect(result.data.id).toBeDefined();
  });
});
```

### Integration Testing

Use our development tools to test with realistic data:

```bash
# Seed test patients
curl -X POST "https://partners-api-sigma.vercel.app/patients/seed?count=5" \
  -H "x-api-key: YOUR_API_KEY"

# Reset data after testing
curl -X POST "https://partners-api-sigma.vercel.app/patients/reset" \
  -H "x-api-key: YOUR_API_KEY"
```

## Support & Resources

<CardGroup cols={3}>
  <Card title="OpenLoop Health" icon="globe" href="https://openloophealth.com">
    Learn more about our platform and services
  </Card>
  <Card title="Contact Support" icon="envelope" href="https://openloophealth.com/contact">
    Get help from our technical team
  </Card>
  <Card title="OpenAPI Spec" icon="code" href="/api-reference/openapi.json">
    Download the complete API specification
  </Card>
</CardGroup>
